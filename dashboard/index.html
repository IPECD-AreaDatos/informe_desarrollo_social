<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Inteligencia Social - IPECD</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        ipecd: {
                            green: '#116935',      /* Verde Principal */
                            lightGreen: '#27993c', /* Verde Secundario */
                            grey: '#58595b',       /* Gris Institucional */
                            dark: '#231f20',       /* Gris Oscuro */
                            bg: '#F9FAFB',         /* Fondo */
                        }
                    },
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                        heading: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tippy.js (for nice tooltips) -->
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>

    <style>
        body {
            background-color: #F9FAFB;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
        }

        .slide-up {
            animation: slideUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        .delay-100 {
            animation-delay: 0.1s;
        }

        .delay-200 {
            animation-delay: 0.2s;
        }

        .delay-300 {
            animation-delay: 0.3s;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Glass/Card Effect */
        .dashboard-card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        /* "Pushup" Hover Effect */
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(17, 105, 53, 0.1), 0 4px 6px -2px rgba(17, 105, 53, 0.05);
            border-color: #27993c;
        }

        /* Tooltip Icon Stylization */
        .info-tooltip {
            color: #58595b;
            cursor: help;
            transition: color 0.2s;
        }

        .info-tooltip:hover {
            color: #116935;
        }

        /* Search Input Focus */
        .search-input:focus {
            ring: 2px solid #116935;
            border-color: #116935;
        }
    </style>
</head>

<body class="text-gray-800 font-sans antialiased pb-20 md:pb-8">

    <!-- Header Fijo -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20">
                <!-- Logo & Title -->
                <div class="flex items-center gap-3 sm:gap-4">
                    <img src="../diseño/LOGO IPECD-09.png" alt="IPECD Logo" class="h-10 sm:h-12 w-auto object-contain">
                    <div class="hidden sm:block">
                        <h1 class="font-heading font-bold text-lg text-ipecd-dark leading-tight">Sistema de Inteligencia
                            Social</h1>
                        <p class="text-xs text-ipecd-green font-semibold tracking-wide uppercase">Corrientes</p>
                    </div>
                </div>

                <!-- Date & User (Fixed to Jan 2026) -->
                <div class="flex items-center gap-2 sm:gap-4">
                    <div class="bg-gray-100 rounded-lg px-3 py-1.5 flex items-center gap-2 border border-gray-200">
                        <i class="fa-regular fa-calendar text-ipecd-grey text-xs sm:text-sm"></i>
                        <span class="text-xs sm:text-sm font-bold text-ipecd-dark">Enero 2026</span>
                    </div>
                    <!-- Hamburger Menu (Mobile) -->
                    <button class="sm:hidden text-ipecd-dark text-xl p-2 hover:bg-gray-100 rounded-lg">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                    <!-- Desktop User Profile -->
                    <div
                        class="hidden sm:flex h-9 w-9 rounded-full bg-ipecd-green text-white items-center justify-center shadow-md font-bold text-sm">
                        AG
                    </div>
                </div>
            </div>
        </div>
        <!-- Mobile Sub-header Title (Visible only on small screens) -->
        <div class="sm:hidden px-4 py-2 bg-gray-50 border-b border-gray-100">
            <h1 class="font-heading font-bold text-sm text-ipecd-dark">Sistema de Inteligencia Social</h1>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-8">

        <!-- Welcome Message -->
        <div class="slide-up">
            <h2 class="text-xl sm:text-2xl font-heading font-bold text-ipecd-dark">Resumen Ejecutivo</h2>
            <p class="text-sm text-ipecd-grey mt-1">Monitoreo de asistencia y gestión territorial.</p>
        </div>

        <!-- KPI Cards Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6">

            <!-- KPI 1 -->
            <div class="dashboard-card p-5 slide-up delay-100">
                <div class="flex justify-between items-start mb-2">
                    <div class="p-2 bg-green-50 rounded-lg text-ipecd-green">
                        <i class="fa-solid fa-clipboard-check text-lg"></i>
                    </div>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Total de expedientes iniciados y completados en el mes corriente."></i>
                </div>
                <h3 class="text-3xl font-heading font-bold text-ipecd-dark">63</h3>
                <p class="text-sm font-medium text-ipecd-grey mt-1">Gestiones Realizadas</p>
                <div class="mt-3 h-1 w-full bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-ipecd-green w-3/4 rounded-full"></div>
                </div>
            </div>

            <!-- KPI 2 -->
            <div class="dashboard-card p-5 slide-up delay-200">
                <div class="flex justify-between items-start mb-2">
                    <div class="p-2 bg-blue-50 rounded-lg text-blue-600">
                        <i class="fa-solid fa-users text-lg"></i>
                    </div>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Cantidad de personas físicas distintas que recibieron asistencia (filtrado por DNI único)."></i>
                </div>
                <h3 class="text-3xl font-heading font-bold text-ipecd-dark">39</h3>
                <p class="text-sm font-medium text-ipecd-grey mt-1">Ciudadanos Asistidos</p>
                <div class="mt-3 h-1 w-full bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-blue-500 w-1/2 rounded-full"></div>
                </div>
            </div>

            <!-- KPI 3 -->
            <div class="dashboard-card p-5 slide-up delay-300">
                <div class="flex justify-between items-start mb-2">
                    <div class="p-2 bg-purple-50 rounded-lg text-purple-600">
                        <i class="fa-solid fa-map-location-dot text-lg"></i>
                    </div>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Número de municipios/parajes distintos donde se realizaron intervenciones."></i>
                </div>
                <h3 class="text-3xl font-heading font-bold text-ipecd-dark">16</h3>
                <p class="text-sm font-medium text-ipecd-grey mt-1">Localidades en Territorio</p>
                <div class="mt-3 h-1 w-full bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-purple-500 w-full rounded-full"></div>
                </div>
            </div>

            <!-- KPI 4 -->
            <div class="dashboard-card p-5 slide-up delay-300 border-l-4 border-ipecd-lightGreen">
                <div class="flex justify-between items-start mb-2">
                    <div class="p-2 bg-orange-50 rounded-lg text-orange-600">
                        <i class="fa-solid fa-fire text-lg"></i>
                    </div>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Categoría de asistencia más solicitada durante el período."></i>
                </div>
                <h3 class="text-xl font-heading font-bold text-ipecd-dark truncate">Pasajes</h3>
                <p class="text-sm font-medium text-ipecd-grey mt-1">Principal Demanda</p>
                <span class="inline-block mt-2 px-2 py-1 bg-red-100 text-red-600 text-xs font-bold rounded">Alta
                    Prioridad</span>
            </div>
        </div>

        <!-- Interactive Search Demo -->
        <div
            class="dashboard-card p-6 slide-up bg-gradient-to-r from-ipecd-green to-ipecd-lightGreen text-white md:col-span-3 shadow-lg">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div class="w-full md:w-1/2">
                    <div class="flex items-center gap-2 mb-2">
                        <i class="fa-solid fa-id-card text-green-200"></i>
                        <h3 class="font-heading font-bold text-lg">Buscador de Ciudadano</h3>
                    </div>
                    <p class="text-sm text-green-50 mb-4">Consulte historial unificado. <span
                            class="opacity-75 italic">(Pruebe con DNI: 27567413)</span></p>

                    <div class="relative">
                        <input type="text" id="dniSearchInput" placeholder="Ingrese DNI..."
                            class="w-full pl-4 pr-12 py-3 rounded-xl text-gray-800 font-bold focus:outline-none focus:ring-4 focus:ring-green-400/50 shadow-inner"
                            onkeypress="handleKeyPress(event)">
                        <button onclick="searchDNI()"
                            class="absolute right-2 top-2 bottom-2 bg-ipecd-dark hover:bg-gray-800 text-white px-4 rounded-lg transition-colors font-medium text-sm">
                            Buscar
                        </button>
                    </div>
                    <p id="searchError" class="text-xs text-red-200 mt-2 hidden font-bold"><i
                            class="fa-solid fa-circle-exclamation mr-1"></i> DNI no encontrado en la base de Enero 2026.
                    </p>
                </div>

                <!-- Result Card (Hidden by default) -->
                <div id="searchResult"
                    class="hidden w-full md:w-1/2 bg-white rounded-xl p-4 text-gray-800 shadow-2xl transform transition-all duration-500 translate-x-4">
                    <div class="flex items-start gap-3 border-b border-gray-100 pb-3 mb-3">
                        <div
                            class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-xs">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-ipecd-dark">Gomez, Maria Estela</h4>
                            <p class="text-xs text-gray-500">DNI: 27.567.413</p>
                        </div>
                        <span
                            class="ml-auto bg-green-100 text-ipecd-green text-xs font-bold px-2 py-1 rounded">Activo</span>
                    </div>
                    <div class="grid grid-cols-2 gap-2 text-sm">
                        <div>
                            <p class="text-xs text-gray-400">Localidad</p>
                            <p class="font-semibold text-ipecd-grey">San Luis del Palmar</p>
                        </div>
                        <div>
                            <p class="text-xs text-gray-400">Historial Ene '26</p>
                            <p class="font-semibold text-ipecd-grey">2 Intervenciones</p>
                        </div>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-100">
                        <p class="text-xs text-gray-400 mb-1">Última Asistencia:</p>
                        <p class="text-xs font-medium text-ipecd-dark bg-gray-50 p-2 rounded border border-gray-100">
                            <i class="fa-solid fa-ticket text-orange-500 mr-1"></i> Solicitud Pasajes (Aprobado)
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section (Grid Adjustment) -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- Locations Chart -->
            <div class="dashboard-card p-6 slide-up">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-heading font-bold text-lg text-ipecd-dark">Localidades con Mayor Demanda</h3>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Top 5 localidades con mayor cantidad de expedientes registrados."></i>
                </div>
                <div class="relative h-64 w-full">
                    <canvas id="locationsChart"></canvas>
                </div>
            </div>

            <!-- Demographics Chart -->
            <div class="dashboard-card p-6 slide-up">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-heading font-bold text-lg text-ipecd-dark">Perfil Demográfico (Edad/Género)</h3>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Segmentación etaria inferida por DNI y distribución por género declarado."></i>
                </div>
                <div class="relative h-64 w-full">
                    <canvas id="demographicsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- NEW: Secondary Insights Row -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

            <!-- Assistance Types Chart -->
            <div class="dashboard-card p-6 slide-up md:col-span-1">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="font-heading font-bold text-lg text-ipecd-dark">Tipo de Asistencia</h3>
                    <i class="fa-regular fa-circle-question info-tooltip"
                        data-tippy-content="Distribución de recursos solicitados más allá de pasajes."></i>
                </div>
                <div class="relative h-48 w-full flex justify-center">
                    <canvas id="assistanceChart"></canvas>
                </div>
            </div>

            <!-- Agent Performance (Restored) -->
            <div class="dashboard-card p-6 slide-up md:col-span-2">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center gap-2">
                        <h3 class="font-heading font-bold text-lg text-ipecd-dark">Casos Asignados</h3>
                    </div>
                    <span class="text-xs text-gray-400">Eficiencia Enero '26</span>
                </div>

                <div class="space-y-4">
                    <!-- Agent 1 -->
                    <div class="flex items-center gap-4">
                        <div
                            class="h-10 w-10 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center font-bold text-xs ring-2 ring-white">
                            SG</div>
                        <div class="flex-1">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-bold text-ipecd-dark">Silvia Karina Gomez</span>
                                <span class="text-sm font-bold text-ipecd-green">10 Casos</span>
                            </div>
                            <div class="w-full bg-gray-100 rounded-full h-2">
                                <div class="bg-ipecd-green h-2 rounded-full" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Agent 2 -->
                    <div class="flex items-center gap-4">
                        <div
                            class="h-10 w-10 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center font-bold text-xs ring-2 ring-white">
                            JP</div>
                        <div class="flex-1">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-bold text-gray-700">Juan Perez</span>
                                <span class="text-sm font-bold text-gray-500">8 Casos</span>
                            </div>
                            <div class="w-full bg-gray-100 rounded-full h-2">
                                <div class="bg-ipecd-lightGreen h-2 rounded-full opacity-70" style="width: 80%"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Agent 3 -->
                    <div class="flex items-center gap-4">
                        <div
                            class="h-10 w-10 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center font-bold text-xs ring-2 ring-white">
                            ML</div>
                        <div class="flex-1">
                            <div class="flex justify-between mb-1">
                                <span class="text-sm font-bold text-gray-700">Maria Lopez</span>
                                <span class="text-sm font-bold text-gray-500">6 Casos</span>
                            </div>
                            <div class="w-full bg-gray-100 rounded-full h-2">
                                <div class="bg-green-300 h-2 rounded-full" style="width: 60%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Practical Strategic Footer (Rewrite) -->
        <div class="bg-white border-t-4 border-ipecd-green rounded-xl p-6 shadow-sm slide-up mt-8">
            <div class="flex flex-col md:flex-row items-center gap-6">
                <div class="flex-shrink-0 p-4 bg-green-50 rounded-full">
                    <i class="fa-solid fa-server text-3xl text-ipecd-green"></i>
                </div>
                <div class="flex-1">
                    <h3 class="font-heading font-bold text-lg text-ipecd-dark mb-2">Potencial de Integración: Beneficios
                        Inmediatos</h3>
                    <p class="text-sm text-gray-600 mb-4 leading-relaxed">
                        Más allá de la visualización, conectar este dashboard a una base de datos centralizada
                        permitiría resolver problemas cotidianos operativos:
                    </p>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm font-medium text-gray-700">
                        <div class="flex items-center gap-2">
                            <i class="fa-solid fa-check text-green-500"></i>
                            <span>Eliminación de fichas en papel</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fa-solid fa-check text-green-500"></i>
                            <span>Historial único por beneficiario</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fa-solid fa-check text-green-500"></i>
                            <span>Reportes automáticos al Ministerio</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="text-center pt-8 pb-4">
            <p class="text-xs text-gray-400">© 2026 IPECD - Instituto Provincial de Estadística y Ciencia de Datos.</p>
        </footer>

    </main>

    <!-- JS Logic -->
    <script>
        // --- Tooltips Configuration ---
        tippy('.info-tooltip', {
            theme: 'light',
            animation: 'scale',
            placement: 'bottom-end',
        });

        // --- Demo Search Logic ---
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                searchDNI();
            }
        }

        function searchDNI() {
            const input = document.getElementById('dniSearchInput').value;
            const resultCard = document.getElementById('searchResult');
            const errorMsg = document.getElementById('searchError');

            // Clean previous state
            resultCard.classList.add('hidden');
            errorMsg.classList.add('hidden');

            // Logic Simulation
            if (input.trim() === '27567413') {
                // Show Success
                resultCard.classList.remove('hidden');
                resultCard.classList.add('fade-in');
            } else if (input.trim() === '') {
                // Do nothing empty
            } else {
                // Show Error
                errorMsg.classList.remove('hidden');
                errorMsg.classList.add('fade-in');
            }
        }

        // --- Chart.js Configuration ---
        Chart.defaults.font.family = "'Roboto', sans-serif";
        Chart.defaults.color = '#58595b';

        // 1. Locations Chart (Horizontal Bar)
        const ctxLoc = document.getElementById('locationsChart').getContext('2d');
        new Chart(ctxLoc, {
            type: 'bar',
            data: {
                labels: ['Corrientes', 'Lomas de Vallejos', 'San Luis del Palmar', 'Santa Lucía', 'San Carlos'],
                datasets: [{
                    label: 'Gestiones',
                    data: [25, 12, 10, 8, 8],
                    backgroundColor: [
                        '#116935', // Primary
                        '#27993c',
                        '#4ea15e',
                        '#76b884',
                        '#9eceaa'
                    ],
                    borderRadius: 6,
                    barThickness: 15
                }]
            },
            options: {
                indexAxis: 'y',
                maintainAspectRatio: false,
                responsive: true,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#231f20',
                        padding: 10,
                        cornerRadius: 8,
                    }
                },
                scales: {
                    x: { grid: { display: false } },
                    y: { grid: { display: false, drawBorder: false } }
                }
            }
        });

        // 2. Demographics Chart (Mixed/Grouped)
        const ctxDemo = document.getElementById('demographicsChart').getContext('2d');
        new Chart(ctxDemo, {
            type: 'bar',
            data: {
                labels: ['Mayores (<25M)', 'Adultos (25M-45M)', 'Jóvenes (>45M)'],
                datasets: [
                    {
                        label: 'Femenino',
                        data: [4, 15, 6],
                        backgroundColor: '#116935',
                        borderRadius: 4,
                        barPercentage: 0.6,
                    },
                    {
                        label: 'Masculino',
                        data: [3, 4, 7],
                        backgroundColor: '#58595b',
                        borderRadius: 4,
                        barPercentage: 0.6,
                    }
                ]
            },
            options: {
                maintainAspectRatio: false,
                responsive: true,
                scales: {
                    x: { displayed: true, grid: { display: false } },
                    y: { beginAtZero: true, grid: { color: '#f3f4f6' } }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: { usePointStyle: true, boxWidth: 8 }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: '#231f20',
                        cornerRadius: 8
                    }
                }
            }
        });

        // 3. NEW: Assistance Types (Doughnut)
        const ctxAssist = document.getElementById('assistanceChart').getContext('2d');
        new Chart(ctxAssist, {
            type: 'doughnut',
            data: {
                labels: ['Pasajes', 'Módulos', 'Medicación', 'Varios'],
                datasets: [{
                    data: [50, 30, 15, 5],
                    backgroundColor: ['#116935', '#27993c', '#76b884', '#e5e7eb'],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right',
                        labels: { usePointStyle: true, boxWidth: 6, font: { size: 10 } }
                    }
                },
                layout: { padding: 0 }
            }
        });
    </script>
</body>

</html>